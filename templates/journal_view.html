{% extends "base.html" %}
{% block content %}
<div class="journal-view-container">
    <div class="journal-header fade-in-item">
        <a href="{{ prev_week_url }}" class="nav-arrow" title="Previous Week"><i class="fas fa-chevron-left"></i></a>
        <div class="journal-header-center">
            <h2>Week of {{ week_start_date.strftime('%B %d, %Y') }}</h2>
            <a href="{{ url_for('journal_view') }}" class="btn-secondary btn-small">Go to Today</a>
        </div>
        <a href="{{ next_week_url }}" class="nav-arrow" title="Next Week"><i class="fas fa-chevron-right"></i></a>
    </div>

    {% if not has_any_entry %}
        <div class="empty-journal-message fade-in-item" style="animation-delay: 0.1s;">
            <h2>Your story begins here.</h2>
            <p>You haven't written any entries yet. Click a day to get started!</p>
        </div>
    {% endif %}

    <div class="week-grid">
        {% for day in week_days %}
            <!-- Staggered animation delay for each day card -->
            <div class="day-card fade-in-item" style="animation-delay: {{ 0.1 + loop.index0 * 0.07 }}s;">
                <div class="day-header">
                    <h3>{{ day.date.strftime('%A') }}</h3>
                    <p>{{ day.date.strftime('%b %d') }}</p>
                </div>
                <div class="day-content">
                    {% if day.entry %}
                        <a href="{{ url_for('view_entry', date_str=day.date.strftime('%Y-%m-%d')) }}" class="entry-link has-entry">
                            <p>"{{ day.entry.content | truncate(80, true) }}"</p>
                            <span>View Entry &rarr;</span>
                        </a>
                    {% else %}
                        <a href="{{ url_for('edit_entry', date_str=day.date.strftime('%Y-%m-%d')) }}" class="entry-link empty-entry">
                            <i class="fas fa-plus"></i>
                            <span>Write Entry</span>
                        </a>
                    {% endif %}
                </div>
            </div>
        {% endfor %}
    </div>
</div>
{% endblock %}